# Fire Detection Service Configuration with ML & N8N Integration
# Copy this to .env and update with your actual values

# ============================================================================
# SERVICE CONFIGURATION
# ============================================================================
PORT=8002
BACKEND_API_URL=http://localhost:8000/api/v1

# ============================================================================
# ML FIRE DETECTION CONFIGURATION
# ============================================================================

# Enable ML-based fire detection (uses YOLOv8)
USE_ML_DETECTION=true

# Path to trained YOLOv8 fire detection model (.pt file)
# Download from: https://universe.roboflow.com/ or train your own
ML_MODEL_PATH=../ml_models/weights/fire_detection.pt

# ML model confidence threshold (0.0-1.0)
# Lower = more sensitive, Higher = more accurate
FIRE_CONFIDENCE_THRESHOLD=0.5

# Use color-based detection as fallback if ML model not available
USE_COLOR_FALLBACK=true

# ============================================================================
# N8N WEBHOOK INTEGRATION (WhatsApp & Voice Alerts)
# ============================================================================

# N8N Webhook URL for fire alerts
# Create a webhook trigger in N8N and paste the URL here
# Example: http://localhost:5678/webhook/fire-alert
N8N_WEBHOOK_URL=

# N8N Webhook for presence updates (optional)
N8N_PRESENCE_WEBHOOK_URL=

# ============================================================================
# TWILIO WHATSAPP ALERTS
# ============================================================================

# Twilio Account Credentials (Get from https://console.twilio.com/)
TWILIO_ACCOUNT_SID=your_account_sid_here
TWILIO_AUTH_TOKEN=your_auth_token_here

# WhatsApp Phone Numbers
TWILIO_WHATSAPP_FROM=whatsapp:+14155238886
TWILIO_WHATSAPP_TO=whatsapp:+905317093987

# ============================================================================
# CAMERA CONFIGURATION
# ============================================================================

# Default camera ID (if running standalone)
CAMERA_ID=0
FLOOR_ID=1
ROOM_LOCATION=Room 101

# ============================================================================
# DETECTION PARAMETERS
# ============================================================================

# How often to check for fire (seconds) - affects CPU usage
DETECTION_INTERVAL=1.0

# Minimum time between alerts for same camera (prevents spam)
COOLDOWN_SECONDS=30

# Minimum area percentage to trigger alert (helps avoid false positives)
MIN_FIRE_AREA_PERCENTAGE=2.0

# ============================================================================
# ALERT CONFIGURATION
# ============================================================================

# Send alerts to N8N for WhatsApp/Voice notifications
SEND_N8N_ALERTS=true

# Send alerts to Laravel backend
SEND_BACKEND_ALERTS=true

# Save screenshot for each alert
SAVE_SCREENSHOTS=true

# Screenshot quality (1-100, higher = better quality)
SCREENSHOT_QUALITY=95

# ============================================================================
# TWILIO CONFIGURATION (for N8N voice/SMS integration)
# ============================================================================
# Configure these in N8N workflow, not here
# TWILIO_ACCOUNT_SID=your_account_sid
# TWILIO_AUTH_TOKEN=your_auth_token
# TWILIO_PHONE_NUMBER=+1234567890
# TWILIO_WHATSAPP_NUMBER=whatsapp:+14155238886

# ============================================================================
# EMERGENCY CONTACTS (for N8N)
# ============================================================================
# Configure in N8N workflow
# SECURITY_PHONE=+1234567890
# SECURITY_WHATSAPP=whatsapp:+1234567890
# FIRE_DEPARTMENT_PHONE=911

# ============================================================================
# LOGGING
# ============================================================================
LOG_LEVEL=INFO
LOG_FILE=fire_detection.log
